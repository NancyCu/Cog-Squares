<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Bowl Squares (SEA vs NE)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --text: #f8fafc;
            --accent: #3b82f6;
            --highlight: #ef4444;
            --gold: #fbbf24;
        }

        * { box-sizing: border-box; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- Scoreboard --- */
        .scoreboard {
            background: var(--card);
            padding: 15px;
            border-radius: 12px;
            width: 100%;
            max-width: 800px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border: 1px solid #334155;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .team { text-align: center; width: 30%; }
        .team img { width: 40px; height: 40px; object-fit: contain; }
        .score { font-size: 2.5rem; font-weight: 800; font-variant-numeric: tabular-nums; }
        .meta { text-align: center; color: #94a3b8; font-size: 0.8rem; display: flex; flex-direction: column; gap: 5px;}
        .live-badge { background: var(--highlight); color: white; padding: 2px 8px; border-radius: 4px; font-weight: bold; font-size: 0.7rem; display: none; }

        /* --- Banner --- */
        .winner-banner {
            background: #22c55e;
            color: white;
            padding: 10px;
            width: 100%;
            max-width: 800px;
            text-align: center;
            font-weight: bold;
            border-radius: 8px;
            margin-bottom: 10px;
            display: none;
            box-shadow: 0 0 10px #22c55e;
        }

        /* --- Grid Wrapper (The Mobile Fix) --- */
        .grid-wrapper {
            width: 100%;
            max-width: 100%;
            overflow-x: auto; /* Allows side scrolling */
            -webkit-overflow-scrolling: touch;
            padding-bottom: 20px;
        }

        .grid-container {
            display: grid;
            /* Fixed layout: 40px left axis, then 10 columns of 60px min-width */
            grid-template-columns: 40px repeat(10, minmax(60px, 1fr));
            gap: 2px;
        }

        /* --- Header & Inputs (Fixing White Bars) --- */
        .header-cell {
            background: var(--card);
            color: var(--accent);
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 50px;
            border-radius: 4px;
            position: relative;
        }

        /* CRITICAL FIX: Make grid inputs transparent - scoped to grid only */
        .grid-container input,
        .header-cell input,
        .square input {
            background-color: transparent !important;
            border: none !important;
            color: inherit !important;
            width: 100%;
            height: 100%;
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            padding: 0;
            margin: 0;
            -webkit-appearance: none; /* Removes default iOS styling */
        }

        /* Accessibility: Restore focus indication for keyboard navigation */
        .grid-container input:focus-visible,
        .header-cell input:focus-visible,
        .square input:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: -2px;
        }

        /* --- Squares --- */
        .square {
            background: #334155;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }
        .square input {
            color: white !important;
            font-size: 0.75rem; /* Smaller text for names */
            font-weight: normal;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* --- Highlight States --- */
        .winner-cell {
            background: var(--gold) !important;
            border: 2px solid white;
            z-index: 10;
            transform: scale(1.05);
            box-shadow: 0 0 10px var(--gold);
        }
        .winner-cell input {
            color: black !important;
            font-weight: 900;
        }
        .winner-axis {
            background: var(--accent) !important;
            color: white !important;
        }

        /* --- Labels & Controls --- */
        .corner {
            grid-column: 1; grid-row: 1;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.6rem; color: #64748b;
        }
        .controls { margin-top: 20px; }
        button {
            background: var(--card); border: 1px solid #475569;
            color: white; padding: 10px 20px; border-radius: 8px; cursor: pointer;
        }
    </style>
</head>
<body>

    <!-- Scoreboard Section -->
    <div class="scoreboard">
        <div class="team">
            <img id="team1-logo" src="" alt="">
            <div id="team1-name">AWAY</div>
        </div>
        <div class="score-container">
            <div style="display: flex; gap: 20px; align-items: center;">
                <div id="team1-score" class="score">0</div>
                <div class="meta">
                    <div id="clock">Loading...</div>
                    <span id="live-indicator" class="live-badge">LIVE</span>
                </div>
                <div id="team2-score" class="score">0</div>
            </div>
        </div>
        <div class="team">
            <img id="team2-logo" src="" alt="">
            <div id="team2-name">HOME</div>
        </div>
    </div>

    <div id="winner-banner" class="winner-banner" role="status">
        Waiting for Score...
    </div>
    <script>
        (function () {
            var banner = document.getElementById('winner-banner');
            if (!banner || typeof MutationObserver === 'undefined') {
                return;
            }

            var observer = new MutationObserver(function (mutations) {
                for (var i = 0; i < mutations.length; i++) {
                    var mutation = mutations[i];
                    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                        if (banner.style.display === 'none') {
                            // Keep the live region rendered so screen readers announce updates.
                            banner.style.display = '';
                        }
                    }
                }
            });

            observer.observe(banner, {
                attributes: true,
                attributeFilter: ['style']
            });
        })();
    </script>
    <!-- The Grid -->
    <div class="labels-row">
        <span>LEFT: <span id="away-team-label">AWAY</span></span>
        <span>TOP: <span id="home-team-label">HOME</span></span>
    </div>

    <div class="grid-wrapper">
        <div class="grid-container" id="grid">
            <!-- Javascript will build the grid here -->
        </div>
    </div>

    <div class="controls">
        <button onclick="window.location.reload()">Refresh Score</button>
    </div>

    <script>
        // --- CONFIGURATION ---
        // Using NFL Scoreboard API
        const API_URL = "https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard";

        // --- HARDCODED DATA ---
        // Top Axis (Patriots / NE): 8, 5, 6, 3, 2, 1, 7, 4, 9, 0
        let topAxis = ['8', '5', '6', '3', '2', '1', '7', '4', '9', '0'];
        
        // Left Axis (Seahawks / SEA): 8, 2, 5, 6, 3, 1, 9, 7, 4, 0
        let leftAxis = ['8', '2', '5', '6', '3', '1', '9', '7', '4', '0'];

        // Grid Data (Mapped exactly from your list)
        // Format: 'row-col': 'Name'
        let gridState = {
            // Row 0 (Left: 8)
            '0-0': 'üçÅ', '0-1': 'EZ', '0-2': 'SR', '0-3': 'MN', '0-4': 'LN', '0-5': 'HN', '0-6': 'Cyn', '0-7': 'SAU', '0-8': 'EM', '0-9': 'Cyn',
            
            // Row 1 (Left: 2)
            '1-0': 'Brian B', '1-1': 'Cyn', '1-2': 'Eli', '1-3': 'EZ', '1-4': 'MN', '1-5': 'EZ', '1-6': 'üçÅ', '1-7': 'SR', '1-8': 'MN', '1-9': 'Jamin',
            
            // Row 2 (Left: 5)
            '2-0': 'LN', '2-1': 'ZAN', '2-2': 'Eli', '2-3': 'üçÅ', '2-4': 'Eli', '2-5': 'MN', '2-6': 'Brian B', '2-7': 'EZ', '2-8': 'HN', '2-9': 'LN',
            
            // Row 3 (Left: 6)
            '3-0': 'EZ', '3-1': 'SR', '3-2': 'HN', '3-3': 'Brian B', '3-4': 'Cyn', '3-5': 'EZ', '3-6': 'ZAN', '3-7': 'LN', '3-8': 'SR', '3-9': 'üçÅ',
            
            // Row 4 (Left: 3)
            '4-0': 'MN', '4-1': 'Eli', '4-2': 'SAU', '4-3': 'EM', '4-4': 'MN', '4-5': 'CuViET', '4-6': 'LN', '4-7': 'Gr', '4-8': 'Eli', '4-9': 'ZAN',
            
            // Row 5 (Left: 1)
            '5-0': 'HN', '5-1': 'EZ', '5-2': 'HN', '5-3': 'EZ', '5-4': 'SR', '5-5': 'MN', '5-6': 'Eli', '5-7': 'üçÅ', '5-8': 'SAU', '5-9': 'MN',
            
            // Row 6 (Left: 9)
            '6-0': 'ZAN', '6-1': 'LN', '6-2': 'LN', '6-3': 'SR', '6-4': 'üçÅ', '6-5': 'EM', '6-6': 'Jamin', '6-7': 'SR', '6-8': 'Cyn', '6-9': 'Eli',
            
            // Row 7 (Left: 7)
            '7-0': 'SAU', '7-1': 'EZ', '7-2': 'Eli', '7-3': 'Brian B', '7-4': 'LN', '7-5': 'Brian B', '7-6': 'EM', '7-7': 'üçÅ', '7-8': 'LN', '7-9': 'Jev',
            
            // Row 8 (Left: 4)
            '8-0': 'SR', '8-1': 'EM', '8-2': 'MN', '8-3': 'Cyn', '8-4': 'SR', '8-5': 'EZ', '8-6': 'Jamin', '8-7': 'MN', '8-8': 'Cyn', '8-9': 'LN',
            
            // Row 9 (Left: 0)
            '9-0': 'Cyn', '9-1': 'üçÅ', '9-2': 'SAU', '9-3': 'Cyn', '9-4': 'üçÅ', '9-5': 'Eli', '9-6': 'SR', '9-7': 'ZAN', '9-8': 'Eli', '9-9': 'üçÅ'
        };

        let currentScore = { home: 0, away: 0 };

        // --- INIT ---
        function init() {
            buildGrid();
            fetchScores();
            setInterval(fetchScores, 15000); // 15s polling
        }

        function buildGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';

            // 1. Top Left Corner
            const corner = document.createElement('div');
            corner.className = 'corner';
            corner.innerText = "SEA \\ NE";
            grid.appendChild(corner);

            // 2. Top Axis
            for (let i = 0; i < 10; i++) {
                const cell = document.createElement('div');
                cell.className = 'header-cell';
                cell.id = `top-${i}`;
                const input = document.createElement('input');
                input.className = 'header-input';
                input.value = topAxis[i]; // Read only
                input.readOnly = true;
                cell.appendChild(input);
                grid.appendChild(cell);
            }

            // 3. Rows
            for (let row = 0; row < 10; row++) {
                // Left Axis Cell
                const leftCell = document.createElement('div');
                leftCell.className = 'header-cell';
                leftCell.id = `left-${row}`;
                const leftInput = document.createElement('input');
                leftInput.className = 'header-input';
                leftInput.value = leftAxis[row]; // Read only
                leftInput.readOnly = true;
                leftCell.appendChild(leftInput);
                grid.appendChild(leftCell);

                // 10 Squares
                for (let col = 0; col < 10; col++) {
                    const square = document.createElement('div');
                    square.className = 'square';
                    square.id = `sq-${row}-${col}`;

                    const input = document.createElement('input');
                    input.value = gridState[`${row}-${col}`] || '';
                    input.readOnly = true;

                    square.appendChild(input);
                    grid.appendChild(square);
                }
            }
        }

        // --- API LOGIC ---
        async function fetchScores() {
            try {
                const res = await fetch(API_URL);
                const data = await res.json();

                // Simple check for first active/scheduled NFL game
                const game = data.events[0]; 
                const comp = game.competitions[0];
                const home = comp.competitors.find(c => c.homeAway === 'home');
                const away = comp.competitors.find(c => c.homeAway === 'away');

                document.getElementById('team1-name').innerText = away.team.abbreviation;
                document.getElementById('team2-name').innerText = home.team.abbreviation;
                document.getElementById('away-team-label').innerText = away.team.name;
                document.getElementById('home-team-label').innerText = home.team.name;

                document.getElementById('team1-logo').src = away.team.logo;
                document.getElementById('team2-logo').src = home.team.logo;

                document.getElementById('team1-score').innerText = away.score;
                document.getElementById('team2-score').innerText = home.score;

                document.getElementById('clock').innerText = game.status.type.detail;
                if(game.status.type.state === 'in') {
                    document.getElementById('live-indicator').style.display = 'inline-block';
                }

                currentScore.away = parseInt(away.score) || 0;
                currentScore.home = parseInt(home.score) || 0;

                highlightWinners();

            } catch (e) {
                console.error("Score fetch error", e);
                // Fallback if API fails
                document.getElementById('clock').innerText = "Check TV for Score";
            }
        }

        // --- HIGHLIGHT WINNER LOGIC ---
        function highlightWinners() {
            document.querySelectorAll('.winner-cell').forEach(el => el.classList.remove('winner-cell'));
            document.querySelectorAll('.winner-axis').forEach(el => el.classList.remove('winner-axis'));
            const banner = document.getElementById('winner-banner');
            banner.style.display = 'none';

            // Home (Top Axis) / Away (Left Axis)
            const lastDigitHome = currentScore.home % 10;
            const lastDigitAway = currentScore.away % 10;

            let winningColIndex = -1;
            let winningRowIndex = -1;

            for(let i=0; i<10; i++) {
                if(parseInt(topAxis[i]) === lastDigitHome) winningColIndex = i;
            }

            for(let i=0; i<10; i++) {
                if(parseInt(leftAxis[i]) === lastDigitAway) winningRowIndex = i;
            }

            if(winningColIndex !== -1 && winningRowIndex !== -1) {
                document.getElementById(`top-${winningColIndex}`).classList.add('winner-axis');
                document.getElementById(`left-${winningRowIndex}`).classList.add('winner-axis');

                const sq = document.getElementById(`sq-${winningRowIndex}-${winningColIndex}`);
                if(sq) {
                    sq.classList.add('winner-cell');

                    const winnerName = gridState[`${winningRowIndex}-${winningColIndex}`] || "Empty Square";
                    banner.innerText = "Current Winner: " + winnerName;
                    banner.style.display = 'block';
                }
            }
        }

        init();
    </script>
</body>
</html>
